pre-commit:
  parallel: true
  commands:
    biome:
      # Format + lint only the staged files; restage fixes automatically
      glob: "*.{ts,tsx,js,jsx,css,md,json}"
      run: bun run check:fix
      stage_fixed: true

pre-push:
  parallel: true
  commands:
    typecheck:
      run: bun run tc
    test:
      run: CI=1 bun run test

post-merge:
  commands:
    install:
      run: |
        if git diff --name-only HEAD@{1} HEAD | grep -Eq '^(package.json|bun.lockb)$'; then
          echo "Dependencies changed. Running bun install..."
          bun install
        fi
